{% assign loading = "lazy" %}
{% if section.index < 2 %}
  {% assign loading = "eager" %}
{% endif %}

{% assign aspect_ratio = "1" %}
{% assign fit = "cover" %}
{% capture placeholder %}product-{% cycle '1', '2', '3', '4', '5', '6' %}{% endcapture %}
<div class="flex col">
  <div
    class="image-wrapper {{ fit }}"
    style="--aspect-ratio: {{ aspect_ratio }};">
    {% assign product_image = product.featured_image | default: blank %}
    {% render "image-element",
      image: product_image,
      fit: fit,
      aspect_ratio: aspect_ratio,
      loading: loading,
      sizes: "25vw",
      placeholder: placeholder
    %}
  </div>
  {% assign product_title = product.title | default: "Product placeholder" %}
  {% assign product_url = product.url |Â default: "" %}
  <a href="{{ product_url }}">
    <p class="h5 spacing-top-8">{{ product_title }}</p>
  </a>
  <p class="small spacing-top-4">
    {% render "product-price" with product %}
  </p>
</div>

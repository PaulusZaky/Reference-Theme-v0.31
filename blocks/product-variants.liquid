<style>
  product-option-value .product-option-name {
    padding: 10px;
  }
  product-option-value {
    border: 2px solid grey;
  }
  product-option-value[selected] {
    border: 2px solid black;
  }
  .product-option-values {
    gap: 10px;
  }
  product-option-value .product-swatch {
    background-color: var(--swatch-color, transparent);
    width: 50px;
    aspect-ratio: 1;
    position: relative;
  }
  product-option-value .product-swatch img{
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    display: flex;
  }
</style>

<div class="flex col">
  <input type="hidden" name="url" value="{{ product.url }}">
  <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id | default: product.variants.first.id }}">
  {%- for option in product.options_with_values -%}
    <div class="flex col">
      <p class="h4">{{ option.name }}</p>
      <div class="flex row wrap product-option-values">
        {%- for option_value in option.values -%}
          <product-option-value {% if option_value.selected %}selected {% endif %}variant-id="{{ option_value.variant.id }}" product-url="{{ option_value.product_url | default: product.url }}">
            {%- if option_value.swatch != blank -%}
              <div class="product-swatch flex col" {%- if option_value.swatch.color != blank -%}style="--swatch-color: {{ option_value.swatch.color }};"{%- endif -%}>
                {%- if option_value.swatch.image != blank -%}
                  {%- render 'image-element', image: option_value.swatch.image, aspect_ratio: 1, fit: 'cover', sizes: '50px', widths: '50,100,150' -%}
                {%- endif -%}
              </div>
            {% else %}
              <div class="product-option-name">
                <p>{{ option_value.name }}</p>
              </div>
            {%- endif -%}
          </product-option-value>
        {%- endfor -%}
      </div>
    </div>
  {%- endfor -%}
</div>

{% schema %}
  {
    "name": "Product Variants",
    "tag": null,
    "settings": [

    ],
    "presets": [
      {
        "name": "Product Variants"
      }
    ]
  }
{% endschema %}